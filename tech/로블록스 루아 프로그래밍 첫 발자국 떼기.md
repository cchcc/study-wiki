# 로블록스 루아 프로그래밍 첫 발자국 떼기

http://acornpub.co.kr/book/roblox-lua-24hours

### 네이밍 컨벤션
- 약어(단어 첫글자만 딴거) 사용 안함(근데 많이 알려진거는 씀 GetXYZ, GetRGB 이런거)
- 클래스명, 오브젝트명은 파스칼 케이스
- 모든 로블록스 API 는 파스칼 케이스
- 지역 변수, 멤버 변수, 함수 는 카멜 케이스
- 지역 상수는 LOUD_SNAKE_CASE
- private 멤버는 _camelCase 처럼 접두사 _ 사용 (이거 외에도 private 한것들의 가시성이 필요하면 _ 접두사로 챙김)
- 모듈명은 export 하는 오브젝트명이랑 일치 해야함

## 1

## 2
```lua
local score = 1
print("score is ".. score)  -- string concat

part.Dialog.InitialPrompt = "Hello, player! Touch me to change color!"  -- Dialog 라는게 있음

```
https://create.roblox.com/docs/assistant
- chat gpt 처럼 뭐 물어보면 좍 알려주는 프롬프트
> Dialog 에 대해서 알려줘

```lua
-- 오브젝트 생성하기
local part = Instance.new("Part")  -- 클래스명
part.Parent = workspace  -- 오브젝트 생성후 부모 지정
```

## 3
```lua
part.CanCollide = false  -- 물리적으로 충돌하는지 여부. false 이면 충돌시 걍 겹쳐버림
part.CanTouch = false  -- 충돌시 이벤트를 호출할건지 여부. CanCollide 가 false 여도 동작은 한다
```

## 4
```lua
function myfun()
    return 1,2,3  -- 여러개 리턴 가능
end

local v1,v2,v3 = myfun()  -- 여러개 리턴한거 받기

part.Touched:Connect(function (touchedPart)  -- 익명 함수
    touched:Destroy()
end)
```

## 5
```lua
local humanoid = part:FindFirstChildWhichIsA("Humanoid")
if humanoid then
    -- 캐릭터인지 판별
end
```

프로퍼티 Attributes 에 커스텀 속성 추가 가능함
```lua
part:SetAttribute("Checked", value)
local value = part:GetAttrybute("Checked")
```

```lua
-- ProximityPrompt 로 포탈 클릭시 캐릭터 이동시키기
ProximityPromptService.PromptTriggered:Connect(function(prompt: ProximityPrompt, playerWhoTriggered: Player)
	if prompt == portalPrompt then  -- param 으로 들어온 prompt 확인
		local activated = portal:GetAttribute("Activated")
		if activated then
			keyStone.Material = Enum.Material.Plastic
			portal:SetAttribute("Activated", false)
			playerWhoTriggered.Character.HumanoidRootPart.CFrame = targetPart.CFrame + Vector3.new(0,1,0)
		end
	end
end)
```

```lua
-- 밟으면 이속증가 + 파티클
boostPart.Touched:Connect(function(touchedPart: BasePart)
	local humanoid = touchedPart.Parent:FindFirstChildWhichIsA("Humanoid")
	if humanoid and humanoid.WalkSpeed < 50 then
		local beforeSpeed = humanoid.WalkSpeed 
		humanoid.WalkSpeed = 50
		local newParticle = script.Parent.ParticleEmitter:Clone()
		newParticle.Parent = humanoid.Parent.HumanoidRootPart
		wait(2)
		humanoid.WalkSpeed = beforeSpeed
		newParticle:Destroy()
	end
end)
```

# 6

```lua
-- 우상단에 기본 제공 리더보드 사용하기
Players.PlayerAdded:Connect(function(player: Player)
	local leaderstats = Instance.new("Folder")
	leaderstats.Name = "leaderstats" -- 이거 스펠링 정확히 이렇게 써야함
	leaderstats.Parent = player
	local Stone = Instance.new("IntValue")
	Stone.Name = "Stone"
	Stone.Value = 0
	Stone.Parent = leaderstats
end)
```

디바운스: flag + wait() 조합으로 짠다
```lua
-- 채광하기. 
-- ServerScriptService 하위에 두고 짜야 다른 유저들 한테도 공유된다
ProximityPromptService.PromptTriggered:Connect(function(prompt: ProximityPrompt, playerWhoTriggered: Player)
	local isResource = prompt.Parent.Parent:HasTag("Resource") == true  -- 프로퍼티에 Tag 지정되있나 확인
	local resourctType = prompt.Parent.Parent:GetAttribute("ResourceType")
	if isResource == true and prompt.Enabled then
		local resourceValue = playerWhoTriggered.leaderstats:FindFirstChild(resourctType) -- .으로 접근하지말고 FindFirst 로 접근해야함
		resourceValue.Value += 1
		prompt.Enabled = false  -- 디바운스용 flag
		wait(DELAY_MINE_SEC) -- 디바운스용 wait
		prompt.Enabled = true
	end
end)
```

# 7

# 8
SurfaceGui - TextLabel - Size - [X.Scale, X.Offset]

# 9
배열. 인덱스가 1부터 시작하는거 주의
```lua
local arr = { "1", "a", "2", "b" }
print(#arr)  -- 배열의 크기, 마지막 인덱스

-- generic for 루프
for index, value iparis(arr) do
end

-- numeric for 루프
for index = 1, #arr, 1 do  -- lua 는 배열 인덱스가 1부터 시작하는거 주의
end 
```

# 10
딕셔너리
```lua
local dictionary = {
    A = 1,
    B = "2",
    ["C C"] = 3,  -- 띄어쓰기가 있는 키값
    A = 10, -- 이전거 덮어씌워짐
}

local dictionary = {  -- 키가 스트링이 아니라 오브젝트 인경우
    [A] = 1,
    [B] = 2,
    [C] = 3, 
}

-- 추가
dictionary.A = 11
dictionary["C C"] = 33

-- 삭제
dictionary.A = nil

table.insert(dictionary, "aaa")

```

# 11
